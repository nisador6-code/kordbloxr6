-- [[ KORBLOX DOUBLE LEG - STRICT R6 ONLY ]]
local player = game.Players.LocalPlayer

local function applyKorblox()
    local char = player.Character or player.CharacterAdded:Wait()
    local torso = char:WaitForChild("Torso", 5)
    
    if torso then
        -- Список ног для R6
        local legs = {
            {name = "Right Leg", offset = 0.5},
            {name = "Left Leg", offset = -0.5}
        }

        for _, info in pairs(legs) do
            local leg = char:FindFirstChild(info.name)
            if leg then
                -- Делаем оригинальную ногу полностью невидимой
                leg.Transparency = 1
                
                -- Удаляем старую кость, если она осталась с прошлого раза
                local oldBone = char:FindFirstChild(info.name.."_KB")
                if oldBone then oldBone:Destroy() end

                -- Создаем деталь кости
                local bone = Instance.new("Part")
                bone.Name = info.name.."_KB"
                bone.Size = Vector3.new(1, 2, 1)
                bone.CanCollide = false
                bone.Massless = true
                bone.Parent = char
                
                local weld = Instance.new("Weld", bone)
                weld.Part0 = torso
                weld.Part1 = bone
                weld.C0 = CFrame.new(info.offset, -1, 0)
                
                local mesh = Instance.new("SpecialMesh", bone)
                mesh.MeshId = "rbxassetid://902945221"
                mesh.TextureId = "rbxassetid://902940643"
                mesh.Scale = Vector3.new(1.15, 1.15, 1.15) -- Чуть увеличил для стиля

                -- Если игра попытается вернуть видимость ноге, этот цикл её скроет
                task.spawn(function()
                    while char and char:Parent do
                        if leg.Transparency ~= 1 then
                            leg.Transparency = 1
                        end
                        task.wait(1)
                    end
                end)
            end
        end
    end
end

-- Запуск при выполнении и после каждой смерти
task.spawn(applyKorblox)
player.CharacterAdded:Connect(applyKorblox)

print("Double Korblox R6 Loaded!")
